<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bf="http://www.lizo.com/schema/bf"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.lizo.com/schema/bf
        http://www.lizo.com/schema/bf.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">


    <bean id="findMax" class="com.lizo.demo.station.FindMax"/>
    <bean id="findMin" class="com.lizo.demo.station.FindMin"/>
    <bean id="soutOutOk" class="com.lizo.demo.station.SoutOutOk"/>
    <bean id="soutOutNo" class="com.lizo.demo.station.SoutOutNo"/>
    <bean id="getDiff" class="com.lizo.demo.station.GetDiff">
        <property name="numA" value="maxValue"/>
        <property name="numB" value="minValue"/>
    </bean>

    <bean id="fileWrite" class="com.lizo.demo.station.FileWrite">
        <property name="filePath" value="out.txt"/>
        <property name="writeDataFormContext">
            <util:list>
                <value>maxValue</value>
                <value>minValue</value>
            </util:list>
        </property>
    </bean>
    <bean id="end" class="com.lizo.demo.station.TestEndStation"/>

    <bf:busFactory/>

    <bf:bus id="testBus" start="findMaxStop" record="false" finish="end"/>

    <bf:stop id="findMaxStop" ref="findMax">
        <bf:routing to="findMinStop"/>
    </bf:stop>

    <bf:stop id="findMinStop" ref="findMin">
        <bf:routing to="fileWriteStop"/>
    </bf:stop>

    <bf:stop id="fileWriteStop" ref="fileWrite">
        <bf:routing to="getDiffStop"/>
    </bf:stop>

    <bf:stop id="getDiffStop" ref="getDiff">
        <bf:routing value="ok" to="soutOutOkStop"/>
        <bf:routing value="no" to="soutOutNoStop"/>
    </bf:stop>

    <bf:stop id="soutOutOkStop" ref="soutOutOk">
    </bf:stop>

    <bf:stop id="soutOutNoStop" ref="soutOutNo">
    </bf:stop>


</beans>